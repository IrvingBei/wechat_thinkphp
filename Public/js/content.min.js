function getCurrentMonthFirst(){var e=new Date;return e.setDate(1),e}function getCurrentMonthLast(){var e=new Date,t=e.getMonth(),a=++t,n=new Date(e.getFullYear(),a,1);return new Date(n-864e5)}function animationHover(e,t){(e=$(e)).hover(function(){e.addClass("animated "+t)},function(){window.setTimeout(function(){e.removeClass("animated "+t)},2e3)})}function toDecimal(e){var t=parseFloat(e);if(!isNaN(t))return t=Math.round(100*e)/100}function _alert(e,t){swal({title:"",text:e,timer:2e3,type:t,showConfirmButton:!1})}jQuery(function(n){var r=n.ajax;n.ajax=function(e){var a=e&&e.success||function(e,t){},t=n.extend(e,{success:function(e,t){40001!==e.status?a(e,t):window.location.reload()}});r(t)}}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.indexOf(e);-1<t&&this.splice(t,1)},function(n,e){var t;(t=$(".treeview-collapse")).delegate(".L1 > .T1","click",function(){$(".L2, .L3").hide(),$(this).parents("tr").nextUntil(".L1",".L2").show()}),t.delegate(".L2 > .T2","click",function(){$(".L3").hide(),$(this).parents("tr").nextUntil(".L2",".L3").show()}),0<$("[class*=calendar]").size()&&($("<link/>").attr({rel:"stylesheet",href:"/Public/css/plugins/jquery-ui/jquery.ui.dt.css"}).insertBefore("head > link:last"),$.ajax({url:"/Public/js/plugins/jquery-ui/jquery.ui.dt.js",dataType:"script",cache:!0,success:function(){$("[class*=calendar]").each(function(){"1970-01-01"==$(this).val()&&$(this).val("")}),"1970-01-01"==$("[class*=calendar]").val()&&$("[class*=calendar]").val(""),0<$(".timepicker[class*=calendar]").size()&&$(".timepicker").prop("readonly",!0).datetimepicker({controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",oneLine:!0,showButtonPanel:!1,hourMin:6,hourMax:22}),0<$(".datepicker[class*=calendar]").size()&&$(".datepicker").prop("readonly",!0).datepicker({numberOfMonths:1,dateFormat:"yy-mm-dd",defaultDate:0}),0<$(".yearpicker[class*=calendar]").size()&&$(".yearpicker").prop("readonly",!0).datepicker({numberOfMonths:1,dateFormat:"yy-mm-dd",defaultDate:0,changeMonth:!0,changeYear:!0}),0<$(".grouppicker[class*=calendar]").size()&&$(".grouppicker").parent().each(function(){var t=$(this).find(".grouppicker").eq(0),a=$(this).find(".grouppicker").eq(1);t.datepicker({numberOfMonths:2,onSelect:function(e){t.is(".rangeyear")||a.is(".rangeyear")?a.val(function(e,t){var a=new Date(e);0<t?a.setFullYear(a.getFullYear()+1):a.setFullYear(a.getFullYear()-1);var n=a.getFullYear(),r=a.getMonth()+1,s=a.getDate();if(parseInt(r)<10&&(r="0"+r),parseInt(s)<10)var s="0"+s;return n+"-"+r+"-"+s}(e,1)):a.datepicker("option","minDate",e)}}),a.datepicker({numberOfMonths:2,onSelect:function(e){t.is(".rangeyear")||a.is(".rangeyear")||t.datepicker("option","maxDate",e)}})})}})),0<$(".tooltip-fn").size()&&($(".tooltip-fn").tooltip({selector:"[data-toggle=tooltip]",container:"body"}),$(".tooltip-fn").popover({selector:"[data-toggle=popover]",container:"body"})),0<$("form.validate").size()&&$.ajax({url:"/Public/js/plugins/validate/jquery.validate.min.js",dataType:"script",cache:!0,success:function(){$.validator.setDefaults({highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error")},errorElement:"span",errorPlacement:function(e,t){t.is(":radio")||t.is(":checkbox")||t.parent().is(".input-group")?e.appendTo(t.parent().parent()):e.appendTo(t.parent())},errorClass:"help-block m-b-none",validClass:""}),$(".validate").validate()}}),$("<link/>").attr({rel:"stylesheet",href:"/Public/css/plugins/sweetalert/sweetalert.css"}).insertBefore("head > link:last"),$.ajax({url:"/Public/js/plugins/sweetalert/sweetalert.min.js",dataType:"script",cache:!0}),0<$("select.chosen").size()&&($("<link/>").attr({rel:"stylesheet",href:"/Public/css/plugins/chosen/chosen.css"}).insertBefore("head > link:last"),$.ajax({url:"/Public/js/plugins/chosen/chosen.jquery.min.js",dataType:"script",cache:!0,success:function(){$(".chosen").chosen({width:"100%",search_contains:!0,no_results_text:"没有查询到相关数据"})}})),$("#page-refresh").click(function(){n.location.reload()}),(0<$(".checkbox").size()||0<$(".radio").size())&&$("<link/>").attr({rel:"stylesheet",href:"/Public/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css"}).insertBefore("head > link:last"),$(".check-all").on("click",function(){$(this).parents("thead").siblings("tbody").find(":checkbox:not(:disabled)").prop("checked",$(this).is(":checked"))}),$(".check-all-form").on("submit",function(){if($(".check-child:checked").size()<1)return _alert("请勾选至少一条数据","error"),!1}),$("<link/>").attr({rel:"stylesheet",href:"/Public/css/plugins/toastr/toastr.min.css"}).insertBefore("head > link:last"),$.ajax({url:"/Public/js/plugins/toastr/toastr.min.js",dataType:"script",cache:!0,success:function(){toastr.options={progressBar:!0,positionClass:"toast-top-right",showDuration:"500",hideDuration:"500",timeOut:"2000",extendedTimeOut:"500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}}),0<$('input[type="file"]').size()&&$.ajax({url:"/Public/js/plugins/bootstrap-prettyfile/bootstrap-prettyfile.js",dataType:"script",cache:!0,success:function(){$('input[type="file"]').prettyFile({text:"选择文件"})}}),$(".modal").appendTo("body"),$(".fn-confirm, .fn-delete, .fn-do").on("click",function(e){var t=$(this),a=t.text();swal({title:a+"提示",text:"确认"+a+"后不可更改或撤销，请谨慎操作",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认"+a,cancelButtonText:"暂不"+a,closeOnConfirm:!1},function(){n.location.href=t.attr("data-link")})}),$('input[type="number"]').on("wheel",function(){return!1})}(window);